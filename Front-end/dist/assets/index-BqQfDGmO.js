(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();const ne="http://localhost:8000";async function I(e,t={}){try{const n=`${ne}${e}`,o={"Content-Type":"application/json",...t.headers},a=await fetch(n,{...t,headers:o});if(!a.ok){const r=await a.json().catch(()=>({}));throw new Error(r.error||`API error: ${a.status} ${a.statusText}`)}return{data:await a.json(),error:null,loading:!1}}catch(n){return console.error("API request failed:",n),{data:null,error:n instanceof Error?n.message:"Unknown error occurred",loading:!1}}}const U={users:{register:async(e,t,n)=>I("/register",{method:"POST",body:JSON.stringify({username:e,password:t,email:n})}),setAlias:async(e,t)=>I("/set-alias",{method:"POST",body:JSON.stringify({userId:e,alias:t})}),login:async(e,t)=>I("/login",{method:"POST",body:JSON.stringify({username:e,password:t})}),getProfile:async e=>I(`/users/${e}`,{method:"GET"})},tournaments:{create:async(e,t,n)=>I("/tournaments",{method:"POST",body:JSON.stringify({name:e,max_players:t,created_by:n})}),getAll:async()=>I("/tournaments",{method:"GET"}),getById:async e=>I(`/tournaments/${e}`,{method:"GET"}),join:async(e,t,n)=>I(`/tournaments/${e}/join`,{method:"POST",body:JSON.stringify({playerAliases:t,userId:n})}),leave:async(e,t)=>I(`/tournaments/${e}/leave`,{method:"DELETE",body:JSON.stringify({player_id:t})})}};function Z(e={}){var z;const t=document.createElement("div");t.className="profile-settings";const n={username:"",displayName:"",skillLevel:"beginner",bio:"",...e},o=document.createElement("form");o.className="profile-form",o.noValidate=!0;const a=document.createElement("div");a.className="form-section";const s=document.createElement("div");s.className="avatar-section";const r=document.createElement("label");r.className="form-label",r.textContent="Customize Avatar";const l=document.createElement("div");l.className="avatar-container";const i=document.createElement("div");i.className="avatar-preview-container";const m=document.createElement("div");m.className="avatar-preview",m.innerHTML=`
    <i class="fas fa-user-circle"></i>
  `;const f=document.createElement("div");f.className="avatar-upload",f.innerHTML='<i class="fas fa-camera"></i>';const d=document.createElement("input");d.type="file",d.accept="image/*",d.className="avatar-input",d.hidden=!0;const h=document.createElement("button");h.type="button",h.className="secondary-button",h.textContent="Change Avatar",h.style.marginTop="1rem",h.addEventListener("click",()=>d.click()),i.appendChild(m),i.appendChild(f),l.appendChild(i),l.appendChild(h),l.appendChild(d),s.appendChild(r),s.appendChild(l),a.appendChild(s);const p=q({label:"Username",name:"username",type:"text",value:n.username,required:!0,placeholder:"Enter your username"}),g=q({label:"Display Name",name:"displayName",type:"text",value:n.displayName,required:!0,placeholder:"Enter your display name"}),b=document.createElement("div");b.className="form-group";const w=document.createElement("label");w.className="form-label",w.textContent="Skill Level",w.htmlFor="skillLevel";const y=[{id:"beginner",label:"Beginner",emoji:"ðŸ‘¶"},{id:"intermediate",label:"Intermediate",emoji:"ðŸ’ª"},{id:"expert",label:"Expert",emoji:"ðŸ†"}],v=document.createElement("div");v.className="skill-level-options",y.forEach(({id:c,label:u,emoji:M})=>{const H=`skill-${c}`,S=document.createElement("div");S.className="radio-option",S.dataset.level=c;const F=document.createElement("input");F.type="radio",F.id=H,F.name="skillLevel",F.value=c,F.checked=n.skillLevel===c;const D=document.createElement("label");D.htmlFor=H,D.dataset.level=c;const W=document.createElement("span");W.className="level-emoji",W.textContent=M;const Y=document.createElement("span");Y.className="level-text",Y.textContent=u,D.appendChild(W),D.appendChild(document.createElement("br")),D.appendChild(Y),S.appendChild(F),S.appendChild(D),v.appendChild(S)}),b.appendChild(w),b.appendChild(v);const C=q({label:"Bio (Optional)",name:"bio",type:"textarea",value:n.bio,placeholder:"Tell us about yourself..."}),L=document.createElement("div");L.className="settings-button-container",L.innerHTML=`
    <button type="button" class="settings-button advanced-toggle-button">
      <span class="button-icon"><i class="fas fa-sliders-h"></i></span>
      <span class="button-text">ADVANCED SETTINGS</span>
      <span class="button-arrow"><i class="fas fa-chevron-down"></i></span>
    </button>
  `;const E=document.createElement("div");E.className="advanced-content",E.style.display="none";const P=q({label:"New Password",name:"newPassword",type:"password",placeholder:"Leave blank to keep current",autoComplete:"new-password"}),$=q({label:"Confirm New Password",name:"confirmPassword",type:"password",placeholder:"Confirm your new password",autoComplete:"new-password"});E.appendChild(P),E.appendChild($);const T=L.querySelector(".advanced-toggle-button"),B=L.querySelector(".fa-chevron-down");T==null||T.addEventListener("click",()=>{const c=E.style.display!=="none";E.style.display=c?"none":"block",B&&(B.className=c?"fas fa-chevron-down":"fas fa-chevron-up")});const A=document.createElement("div");A.className="settings-button-container",A.innerHTML=`
    <button type="submit" class="settings-button save-changes-button">
      <span class="button-icon"><i class="fas fa-save"></i></span>
      <span class="button-text">SAVE CHANGES</span>
      <span class="button-check"><i class="fas fa-check"></i></span>
    </button>
  `,o.appendChild(a),o.appendChild(p),o.appendChild(g),o.appendChild(b),o.appendChild(C),o.appendChild(L),o.appendChild(E);const k=document.createElement("div");return k.className="settings-button-container",k.innerHTML=`
    <button type="button" class="settings-button game-history-button">
      <span class="button-icon"><i class="fas fa-history"></i></span>
      <span class="button-text">GAME HISTORY</span>
      <span class="button-arrow"><i class="fas fa-external-link-alt"></i></span>
    </button>
  `,(z=k.querySelector("button"))==null||z.addEventListener("click",()=>{console.log("Game History clicked"),K("Game History feature coming soon!","info")}),o.appendChild(k),o.appendChild(A),o.addEventListener("submit",async c=>{c.preventDefault();const u=new FormData(o),M={};u.forEach((S,F)=>{S&&(M[F]=S)});const H=o.querySelector('input[name="skillLevel"]:checked');H&&(M.skillLevel=H.value);try{console.log("Updating profile:",M),K("Profile updated successfully!","success")}catch(S){console.error("Error updating profile:",S),K("Failed to update profile. Please try again.","error")}}),t.appendChild(o),t}function q({label:e,name:t,type:n,value:o="",required:a=!1,placeholder:s="",autoComplete:r="",className:l=""}){const i=document.createElement("div");i.className=`form-group ${l}`.trim();const m=document.createElement("label");m.className="form-label",m.htmlFor=t,m.textContent=e;let f;if(n==="textarea"){const d=document.createElement("textarea");d.id=t,d.name=t,d.value=o,d.placeholder=s,d.required=a,d.rows=3,f=d}else{const d=document.createElement("input");d.type=n,d.id=t,d.name=t,d.value=o,d.placeholder=s,d.required=a,r&&(d.autocomplete=r),f=d}return f.className="form-input",i.appendChild(m),i.appendChild(f),i}const K=window.showMessage;window.messageTimeout=null;let G=null;function N(e){J(),setTimeout(()=>{history.pushState(null,"",e);const t=document.getElementById("app");if(t){j(t),document.title=ee(e);const n=document.getElementById("screen-reader-live-region");n&&(n.textContent="",n.textContent=`Navigated to ${document.title}.`),window.scrollTo(0,0)}V()},300)}function ee(e){switch(e){case"/":return"Home - Neon Pong";case"/tournament":return"Tournaments - Neon Pong";case"/register":return"Register - Neon Pong";case"/login":return"Login - Neon Pong";default:return"Page Not Found - Neon Pong"}}function te(){const e=document.createElement("div");e.className="loading-overlay hidden",e.id="loading-overlay",e.setAttribute("role","status"),e.setAttribute("aria-live","assertive");const t=document.createElement("div");t.className="spinner",e.appendChild(t);const n=document.createElement("p");return n.className="loading-text",n.textContent="Loading...",n.setAttribute("aria-label","Content is loading"),e.appendChild(n),e}function J(){const e=document.getElementById("app");if(e){let t=document.getElementById("loading-overlay");t||(t=te(),e.appendChild(t)),t.classList.remove("hidden")}}function V(){const e=document.getElementById("loading-overlay");e&&e.classList.add("hidden")}function x(e,t="info"){const n=document.querySelector(".message");n&&n.remove(),window.messageTimeout&&clearTimeout(window.messageTimeout);const o=document.createElement("div");o.className=`message ${t}-message`;const a=document.createElement("div");a.className="message-content",a.textContent=e;const s=document.createElement("button");s.className="close-button",s.innerHTML="&times;",s.setAttribute("aria-label","Close message"),s.addEventListener("click",()=>{o.remove(),window.messageTimeout&&clearTimeout(window.messageTimeout)});let r="";t==="success"?r="âœ“":t==="error"?r="âœ•":r="â„¹";const l=document.createElement("span");l.className="message-icon",l.textContent=r,o.appendChild(l),o.appendChild(a),o.appendChild(s),o.setAttribute("role","status"),o.setAttribute("aria-live","polite"),o.setAttribute("aria-atomic","true"),document.body.appendChild(o),window.messageTimeout=window.setTimeout(()=>{o.style.opacity="0",o.style.transform="translateY(-20px)",setTimeout(()=>o.remove(),300)},5e3)}let R=!1,O=1;function ae(){R=!R,document.body.classList.toggle("high-contrast",R),localStorage.setItem("highContrast",R.toString())}function Q(e){const a=Math.max(.8,Math.min(2,O+(e?.1:-.1)));if(a!==O){O=a,document.documentElement.style.setProperty("--font-size-multiplier",O.toString()),document.body.style.display="none",document.body.offsetHeight,document.body.style.display="";const s=document.querySelector(".font-size-display");if(s){const r=Math.round(O*100),l=`Font size set to ${r}%`;s.textContent=`${r}%`,localStorage.setItem("fontSizeMultiplier",O.toString()),s.classList.add("active"),setTimeout(()=>s.classList.remove("active"),500);const i=document.getElementById("a11y-announcement");i?(i.textContent=l,setTimeout(()=>i.textContent="",1e3)):x(l,"info")}}}function oe(){localStorage.getItem("highContrast")==="true"&&(R=!0,document.body.classList.add("high-contrast"));const t=parseFloat(localStorage.getItem("fontSizeMultiplier")||"1");t>=.8&&t<=1.5&&(O=t,document.documentElement.style.setProperty("--font-size-multiplier",O.toString()))}typeof document<"u"&&document.addEventListener("DOMContentLoaded",oe);function se(){const e=document.createElement("nav");e.className="navbar",e.setAttribute("aria-label","Main navigation");const t=document.createElement("a");t.className="navbar-logo",t.textContent="Neon Pong",t.href="/",t.addEventListener("click",c=>{c.preventDefault(),N("/")});const n=document.createElement("div");n.id="mobile-menu",n.className="menu-toggle",n.setAttribute("aria-expanded","false"),n.setAttribute("aria-controls","navbarLinksContainer");for(let c=0;c<3;c++){const u=document.createElement("span");u.className="bar",n.appendChild(u)}const o=document.createElement("div");o.id="navbarLinksContainer",o.className="navbar-links-container";const a=document.createElement("div");a.className="navbar-links",a.setAttribute("role","menubar");const s=document.createElement("a");s.href="/",s.className="navbar-link",s.textContent="Home",s.setAttribute("role","menuitem"),s.addEventListener("click",c=>{c.preventDefault(),N("/")});const r=document.createElement("a");r.href="/tournament",r.className="navbar-link",r.textContent="Tournaments",r.setAttribute("role","menuitem"),r.addEventListener("click",c=>{c.preventDefault(),N("/tournament")});const l=document.createElement("a");l.href="/ACCOUNT",l.className="navbar-link",l.textContent="ACCOUNT",l.setAttribute("role","menuitem"),l.addEventListener("click",c=>{c.preventDefault();const u=window.location.pathname;N((u==="/login"||u==="/register")&&u==="/login"?"/register":"/login")}),a.appendChild(s),a.appendChild(r),a.appendChild(l);const i=document.createElement("div");i.className="profile-container";const m=document.createElement("button");m.className="profile-button",m.setAttribute("aria-label","Profile menu"),m.setAttribute("aria-expanded","false"),m.setAttribute("aria-haspopup","true");const f=document.createElement("i");f.className="fas fa-user-circle",m.appendChild(f);const d=document.createElement("div");d.className="profile-dropdown",d.setAttribute("role","menu");const h=document.createElement("div");h.className="dropdown-content";const p=document.createElement("div");p.className="profile-settings-container";const g=document.createElement("div");g.className="dropdown-header",g.innerHTML=`
    <i class="fas fa-user-circle"></i>
    <span>Guest</span>
  `,p.appendChild(g);const b=document.createElement("div");b.className="dropdown-divider",p.appendChild(b),[{icon:"fa-cog",text:"Profile Settings",action:"settings"},{icon:"fa-sign-out-alt",text:"Sign Out",action:"signout"}].forEach(c=>{const u=document.createElement("a");u.href="#",u.className="dropdown-item",u.setAttribute("role","menuitem"),u.setAttribute("data-action",c.action),u.innerHTML=`
      <i class="fas ${c.icon}"></i>
      <span>${c.text}</span>
    `,p.appendChild(u)}),h.appendChild(p);const y=document.createElement("div");y.className="profile-form-container",y.style.display="none";const v=document.createElement("button");v.className="dropdown-back",v.innerHTML=`
    <i class="fas fa-arrow-left"></i>
    <span>Back to Menu</span>
  `,v.addEventListener("click",()=>{p.style.display="block",y.style.display="none"}),y.appendChild(v);const C=Z({username:"username123",displayName:"Player",skillLevel:"intermediate",bio:"Ping pong enthusiast!",avatar:""});y.appendChild(C),h.appendChild(y),h.addEventListener("click",c=>{const M=c.target.closest(".dropdown-item");if(!M)return;c.preventDefault();const H=M.getAttribute("data-action");H==="settings"?(p.style.display="none",y.style.display="block"):H==="signout"&&console.log("User signed out")}),d.appendChild(h),i.appendChild(m),i.appendChild(d),m.addEventListener("click",c=>{c.stopPropagation();const u=m.getAttribute("aria-expanded")==="true";m.setAttribute("aria-expanded",(!u).toString()),d.classList.toggle("show",!u)}),document.addEventListener("click",c=>{i.contains(c.target)||(m.setAttribute("aria-expanded","false"),d.classList.remove("show"))}),a.appendChild(i);const L=document.createElement("div");L.className="accessibility-controls",L.setAttribute("aria-label","Accessibility controls");const E=document.createElement("button");E.className="accessibility-btn",E.innerHTML='<i class="fas fa-adjust" aria-hidden="true"></i>',E.setAttribute("aria-label","Toggle high contrast mode"),E.setAttribute("title","Toggle high contrast mode"),E.addEventListener("click",ae);const P=document.createElement("div");P.className="font-size-controls",P.setAttribute("aria-label","Font size controls");const $=document.createElement("span");$.className="sr-only",$.textContent="Font size: ",P.appendChild($);const T=document.createElement("button");T.className="font-size-btn",T.innerHTML='<i class="fas fa-minus" aria-hidden="true"></i> <span class="sr-only">Decrease font size</span>',T.setAttribute("aria-label","Decrease font size"),T.setAttribute("title","Decrease font size (Smaller text)"),T.addEventListener("click",c=>{c.preventDefault(),Q(!1)});const B=document.createElement("span");B.className="font-size-display",B.textContent="A",B.setAttribute("aria-hidden","true");const A=document.createElement("button");A.className="font-size-btn",A.innerHTML='<i class="fas fa-plus" aria-hidden="true"></i> <span class="sr-only">Increase font size</span>',A.setAttribute("aria-label","Increase font size"),A.setAttribute("title","Increase font size (Larger text)"),A.addEventListener("click",c=>{c.preventDefault(),Q(!0)}),P.appendChild(T),P.appendChild(B),P.appendChild(A);const k=document.createElement("a");k.href="#main-content",k.className="skip-to-content",k.textContent="Skip to main content",k.setAttribute("tabindex","0");const z=document.createElement("div");return z.className="controls-container",z.appendChild(P),z.appendChild(E),L.appendChild(z),o.appendChild(a),o.appendChild(L),e.prepend(k),e.appendChild(t),e.appendChild(n),e.appendChild(o),n.addEventListener("click",()=>{o.classList.toggle("active"),n.classList.toggle("active");const c=n.classList.contains("active");if(n.setAttribute("aria-expanded",String(c)),window.innerWidth<=768){const u=document.getElementById("language-switcher-container");u&&(u.style.display=c?"flex":"none")}}),a.querySelectorAll(".navbar-link").forEach(c=>{c.addEventListener("click",()=>{window.innerWidth<=768&&(o.classList.remove("active"),n.classList.remove("active"),n.setAttribute("aria-expanded","false"))})}),document.addEventListener("click",c=>{window.innerWidth<=768&&!o.contains(c.target)&&!n.contains(c.target)&&o.classList.contains("active")&&(o.classList.remove("active"),n.classList.remove("active"),n.setAttribute("aria-expanded","false"))}),e}function _(){return document.createElement("footer")}function re(){const e=document.createElement("div");e.className="page",e.setAttribute("role","main"),e.id="home";const t=document.createElement("section");t.className="hero-section content-section";const n=document.createElement("img");n.className="ping-pong-paddle";const o=document.createElement("h1");o.className="hero-title",o.textContent="NEON PONG";const a=document.createElement("h2");a.className="hero-subtitle",a.textContent="THE ULTIMATE RETRO-FUTURISTIC ARCADE EXPERIENCE.";const s=document.createElement("p");s.className="hero-description",s.textContent="Challenge your friends in a fast-paced game of skill and reflexes.";const r=document.createElement("div");r.className="hero-cta";const l=document.createElement("button");l.className="primary-button register-cta-button",l.innerHTML='<i class="fas fa-user-plus"></i> Register Now',l.addEventListener("click",()=>N("/register")),r.appendChild(l),t.appendChild(n),t.appendChild(o),t.appendChild(a),t.appendChild(s),t.appendChild(r),e.appendChild(t);const i=document.createElement("section");i.id="team",i.className="content-section";const m=document.createElement("h2");m.className="section-title",m.textContent="Meet the Team",i.appendChild(m);const f=document.createElement("div");return f.className="team-grid",[{name:"Hanieh",avatar:"./pic1.png"},{name:"Mira",avatar:"./pic2.png"},{name:"Fatima Fidha",avatar:"./pic3.png"}].forEach(h=>{const p=document.createElement("div");p.className="team-member-card";const g=document.createElement("img");g.src=h.avatar,g.alt=`Avatar of ${h.name}`,g.className="team-member-avatar";const b=document.createElement("p");b.className="team-member-name",b.textContent=h.name,p.appendChild(g),p.appendChild(b),f.appendChild(p)}),i.appendChild(f),e.appendChild(i),e.appendChild(_()),e}function ie(){const e=document.createElement("div");e.className="page content-section",e.id="tournaments-page",e.setAttribute("role","main");const t=document.createElement("h1");t.className="section-title",t.textContent="Tournaments",e.appendChild(t);const n=document.createElement("button");n.className="primary-button",n.style.cssText="margin-bottom: 2rem; display: block; margin-left: auto; margin-right: auto;",n.innerHTML='<i class="fas fa-plus"></i> Create Tournament',n.addEventListener("click",ce),e.appendChild(n);const o=document.createElement("div");return o.className="tournament-list",o.setAttribute("role","list"),o.id="tournament-list-container",e.appendChild(o),le(o),e.appendChild(_()),e}async function le(e){J();try{const t=await U.tournaments.getAll();t.data&&t.data.length>0?(e.innerHTML="",t.data.forEach(n=>{const o=document.createElement("div");o.className="tournament-item",o.setAttribute("role","listitem");let a="",s="",r=!1;n.status==="pending"?(a="status-open",s="Join Tournament"):n.status==="started"?(a="status-in-progress",s="View Progress",r=!0):(a="status-completed",s="View Results"),o.innerHTML=`
          <h3>${n.name}</h3>
          <p class="tournament-status"><span class="status-indicator ${a}"></span> ${n.status}</p>
          <p><strong>Max Players:</strong> ${n.max_players}</p>
          <button class="primary-button join-button ${n.status==="completed"?"secondary-button":""}" ${r?"disabled":""}>${s}</button>
        `;const l=o.querySelector(".join-button");l&&n.status==="pending"&&l.addEventListener("click",()=>{console.log(`Joining tournament: ${n.name}`)}),e.appendChild(o)})):e.innerHTML=`
        <div style="text-align: center; color: var(--text-color-light); padding: 2rem;">
          <p>No tournaments available. Create one to get started!</p>
        </div>
      `}catch(t){e.innerHTML=`
      <div style="text-align: center; color: var(--error-color); padding: 2rem;">
        <p>Failed to load tournaments. Please try again later.</p>
      </div>
    `,console.error("Failed to load tournaments:",t)}finally{V()}}function X(e=!0){const t=document.createElement("div");t.className="page content-section",t.id=e?"login":"register",t.setAttribute("role","main");const n=document.createElement("div");n.className="form-container";const o=document.createElement("p");o.className="text-center mt-4";const a=document.createElement("a");a.href="#",a.className="text-blue-500 hover:underline",a.textContent=e?"Create an ACCOUNT":"Sign in to existing ACCOUNT",a.addEventListener("click",v=>{v.preventDefault(),N(e?"/register":"/login")});const s=document.createElement("div");s.className="toggle-text-container";const r=document.createElement("span");r.className="toggle-text",r.textContent=e?"Don't have an account? ":"Already have an account? ",a.className="toggle-link neon-text",a.style.marginLeft="4px",a.style.textDecoration="none",a.style.transition="all 0.3s ease",a.style.fontWeight="600",a.addEventListener("mouseenter",()=>{a.style.textShadow="0 0 10px rgba(99, 102, 241, 0.8)"}),a.addEventListener("mouseleave",()=>{a.style.textShadow="none"}),s.appendChild(r),s.appendChild(a),o.appendChild(s);const l=document.createElement("h2");l.className="form-title",l.textContent=e?"Login to Neon Pong":"Register for Neon Pong";const i=document.createElement("form");i.noValidate=!0;let m=null;if(!e){const v=document.createElement("label");v.className="form-label",v.textContent="Email",m=document.createElement("input"),m.type="email",m.className="form-input",m.required=!0,m.placeholder="Enter your email",i.appendChild(v),i.appendChild(m)}const f=document.createElement("label");f.className="form-label",f.textContent="Username";const d=document.createElement("input");d.type="text",d.className="form-input",d.required=!0,d.placeholder="Choose a username";const h=document.createElement("label");h.className="form-label",h.textContent="Password";const p=document.createElement("input");p.type="password",p.className="form-input",p.required=!0,p.placeholder="Create a password";let g=null,b=null;e||(b=document.createElement("label"),b.className="form-label",b.textContent="Confirm Password",g=document.createElement("input"),g.type="password",g.className="form-input",g.required=!0,g.placeholder="Confirm your password");const w=document.createElement("button");w.type="submit",w.className="primary-button w-full",w.textContent=e?"Login":"Register";const y=document.createElement("button");return y.type="button",y.className="secondary-button w-full mt-2",y.textContent="Back to Home",y.addEventListener("click",()=>N("/")),e||i.appendChild(document.createElement("br")),i.appendChild(f),i.appendChild(d),i.appendChild(document.createElement("br")),i.appendChild(h),i.appendChild(p),!e&&g&&b&&(i.appendChild(document.createElement("br")),i.appendChild(b),i.appendChild(g)),e&&i.appendChild(document.createElement("br")),i.appendChild(w),i.appendChild(y),n.appendChild(l),n.appendChild(i),n.appendChild(o),t.appendChild(n),t.appendChild(_()),i.addEventListener("submit",async v=>{if(v.preventDefault(),!e&&p.value!==(g==null?void 0:g.value)){x("Passwords do not match","error");return}J();try{if(e){const C=await U.users.login(d.value,p.value);C.data?(G={id:C.data.userId,username:d.value},x("Login successful!","success"),N("/tournament")):x(C.error||"Login failed","error")}else if(m){const C=await U.users.register(d.value,p.value,m.value);C.data?(G={id:C.data.userId,username:d.value},x("Registration successful!","success"),N("/tournament")):x(C.error||"Registration failed","error")}}catch(C){console.error("Auth error:",C),x("An error occurred. Please try again.","error")}finally{V()}}),t}function ce(){const e=document.createElement("div");e.className="modal-overlay",e.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
  `;const t=document.createElement("div");t.className="modal-content",t.style.cssText=`
    background: var(--bg-color);
    border: 2px solid var(--primary-color);
    border-radius: 10px;
    padding: 2rem;
    max-width: 500px;
    width: 90%;
    box-shadow: 0 0 20px var(--primary-color);
  `,t.innerHTML=`
    <h2 style="color: var(--primary-color); margin-bottom: 1.5rem; text-align: center;">Create Tournament</h2>
    <form id="create-tournament-form">
      <label for="tournament-name" style="display: block; margin-bottom: 0.5rem; color: var(--text-color);">Tournament Name:</label>
      <input type="text" id="tournament-name" required style="width: 100%; padding: 0.8rem; margin-bottom: 1rem; border: 1px solid var(--primary-color); border-radius: 5px; background: var(--bg-color); color: var(--text-color);">
      <label for="max-players" style="display: block; margin-bottom: 0.5rem; color: var(--text-color);">Max Players:</label>
      <select id="max-players" required style="width: 100%; padding: 0.8rem; margin-bottom: 1.5rem; border: 1px solid var(--primary-color); border-radius: 5px; background: var(--bg-color); color: var(--text-color);">
        <option value="">Select Players</option>
        <option value="4">4 Players</option>
        <option value="8">8 Players</option>
      </select>
      <div style="display: flex; gap: 1rem; justify-content: flex-end;">
        <button type="button" id="cancel-tournament" class="secondary-button">Cancel</button>
        <button type="submit" class="primary-button">Create Tournament</button>
      </div>
    </form>
  `,e.appendChild(t),document.body.appendChild(e);const n=e.querySelector("#create-tournament-form");e.querySelector("#cancel-tournament").addEventListener("click",()=>{document.body.removeChild(e)}),e.addEventListener("click",a=>{a.target===e&&document.body.removeChild(e)}),n.addEventListener("submit",async a=>{if(a.preventDefault(),!G){x("Please register first to create a tournament.","error"),document.body.removeChild(e),N("/register");return}const s=e.querySelector("#tournament-name"),r=e.querySelector("#max-players"),l=s.value.trim(),i=parseInt(r.value);if(!l||!i){x("Please fill in all fields.","error");return}J();try{const m=await U.tournaments.create(l,i,G.id);if(m.data){if(x(`Tournament "${l}" created successfully!`,"success"),document.body.removeChild(e),window.location.pathname==="/tournament"){const f=document.getElementById("app");f&&j(f)}}else x(m.error||"Failed to create tournament.","error")}catch(m){x("Failed to create tournament. Please try again.","error"),console.error("Tournament creation error:",m)}finally{V()}})}function j(e){const t=window.location.pathname;e.innerHTML="";let n=document.getElementById("screen-reader-live-region");n||(n=document.createElement("div"),n.id="screen-reader-live-region",n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),n.className="hidden-visually",document.body.appendChild(n));const a={"/":re,"/login":()=>X(!0),"/register":()=>X(!1),"/tournament":ie,"/profile":()=>Z(),"/ACCOUNT":()=>X(!0)}[t],s=document.createElement("div");if(s.className="page-content-wrapper",e.appendChild(s),a)s.appendChild(a()),document.title=ee(t);else{const r=document.createElement("div");r.className="page content-section",r.id="not-found",r.setAttribute("role","main"),r.innerHTML='<h1 class="section-title">404 - Page Not Found</h1><p style="text-align:center; color: var(--text-color-light);">The page you are looking for does not exist.</p>';const l=document.createElement("button");l.className="primary-button back-button",l.textContent="Go to Home",l.addEventListener("click",()=>N("/")),r.appendChild(l),r.appendChild(_()),s.appendChild(r),document.title="404 - Page Not Found - Neon Pong"}document.querySelectorAll(".navbar-link").forEach(r=>{r.classList.remove("active");const l=r.getAttribute("href"),i=window.location.pathname;(l===i||l==="/"&&i==="/")&&r.classList.add("active"),(i==="/tournament"&&l==="/tournament"||i==="/register"&&l==="/register")&&r.classList.add("active")})}document.addEventListener("DOMContentLoaded",async()=>{console.log("[App] DOM fully loaded, initializing application..."),console.log("[App] Finding app container...");const e=document.getElementById("app");if(!e){console.error("[App] Failed to find #app element");return}console.log("[App] Creating navigation bar...");const t=se();if(document.body.insertBefore(t,e),!document.getElementById("loading-overlay")){const n=te();document.body.appendChild(n)}console.log("[App] Setting up routes..."),j(e),window.addEventListener("popstate",()=>{j(e)}),(window.location.pathname==="/"||window.location.pathname==="")&&N("/"),console.log("[App] Initialization complete")});window.addEventListener("popstate",()=>{const e=document.getElementById("app");e&&j(e)});
